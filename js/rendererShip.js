// Generated by CoffeeScript 1.4.0

define(['shipShape'], function(shipShape) {
  return function(ctx, settings, state) {
    var nose, point, rotateFactor, _i, _j, _len, _len1, _ref, _ref1;
    ctx.save();
    ctx.translate(state.shipState.positionX, state.shipState.positionY);
    ctx.strokeStyle = ctx.fillStyle = settings.ship.color;
    ctx.fillRect(-1, -1, 2, 2);
    rotateFactor = state.shipState.direction;
    ctx.rotate(rotateFactor);
    nose = shipShape.points[0];
    ctx.moveTo(nose[0], nose[1]);
    ctx.beginPath();
    _ref = shipShape.points;
    for (_i = 0, _len = _ref.length; _i < _len; _i++) {
      point = _ref[_i];
      ctx.lineTo(point[0], point[1]);
    }
    ctx.lineTo(nose[0], nose[1]);
    ctx.stroke();
    if (state.shipState.thrusting) {
      ctx.strokeStyle = settings.ship.engineColor;
      ctx.lineWidth = 2;
      ctx.beginPath();
      _ref1 = shipShape.enginePoints;
      for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
        point = _ref1[_j];
        ctx.lineTo(point[0], point[1]);
      }
      ctx.stroke();
    }
    ctx.rotate(-1 * rotateFactor);
    ctx.translate(0, 0);
    ctx.restore();
  };
});
