// Generated by CoffeeScript 1.4.0
var __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; };

define(function() {
  var ShipState;
  return ShipState = (function() {

    function ShipState(settings) {
      this.settings = settings;
      this.thrustOn = __bind(this.thrustOn, this);

      this.changeDirection = __bind(this.changeDirection, this);

      this.velocityX = 0;
      this.velocityY = 0;
      this.direction = 0;
      this.positionX = 0;
      this.positionY = 0;
      this.thrusting = false;
      this.mass = 1;
    }

    ShipState.prototype.changeDirection = function(delta) {
      var radFactor;
      if (delta) {
        this.direction += delta;
        radFactor = Math.PI / 180;
        if (this.direction >= radFactor) {
          this.direction -= radFactor;
        }
        if (this.direction < 0) {
          this.direction += radFactor;
        }
      }
    };

    ShipState.prototype.thrustOn = function(bool) {
      this.thrusting = bool;
    };

    ShipState.prototype.updatePosition = function() {
      var currentAccelerationX, currentAccelerationY, currentForceX, currentForceY;
      currentForceY = this.settings.game.gravity;
      if (this.thrusting) {
        currentForceY += -1 * Math.cos(this.direction) * this.settings.ship.thrustRatio;
      }
      currentForceY += -1 * this.velocityY * this.settings.game.viscosity;
      currentAccelerationY = currentForceY * this.mass;
      this.velocityY += currentAccelerationY;
      this.positionY += this.velocityY;
      currentForceX = 0;
      if (this.thrusting) {
        currentForceX += Math.sin(this.direction) * this.settings.ship.thrustRatio;
      }
      currentForceX += -1 * this.velocityX * this.settings.game.viscosity;
      currentAccelerationX = currentForceX * this.mass;
      this.velocityX += currentAccelerationX;
      this.positionX += this.velocityX;
    };

    return ShipState;

  })();
});
